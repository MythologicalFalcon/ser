<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Your head content here -->
    <style>
        /* Add your CSS styles here */
        .chat-messages {
            max-height: 300px; /* Set the maximum height for the scrollable box */
            overflow-y: scroll; /* Enable vertical scrolling */
            border: 1px solid #ccc; /* Add a border for the box */
            padding: 10px;
            scroll-behavior: smooth;
            scroll-snap-type: y mandatory;
        }
        .message-container {
            scroll-snap-align: start;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="header">Question Chat</div>
        <div class="chat-messages" id="chatMessages">
            <!-- Chat messages will be displayed here -->
        </div>
        <div class="chat-box">
            <form id="chatForm" action="/send-message" method="post">
                <input id="messageInput" name="message" type="text" placeholder="Type your message...">
                <button type="submit">Send</button>
            </form>
        </div>
    </div>
    <script>
        const chatMessages = document.getElementById('chatMessages');
    
        // Function to refresh initial messages from Firebase
        function refreshInitialMessages() {
            fetch('/get-initial-messages')
                .then(response => response.json())
                .then(data => {
                    chatMessages.innerHTML = ''; // Clear existing messages
                    const messagesToDisplay = data.messages.slice(-10); // Get the last 10 messages
                    messagesToDisplay.forEach(message => {
                        const messageDiv = document.createElement('div');
                        messageDiv.classList.add('message-container');
                        
                        const messageText = document.createElement('p');
                        messageText.textContent = message.message;
                        
                        const responseText = document.createElement('p');
                        responseText.textContent = message.response;
                        
                        const timestamp = document.createElement('p');
                        timestamp.textContent = new Date(message.timestamp).toLocaleString(); // Format the timestamp
    
                        messageDiv.appendChild(messageText);
                        messageDiv.appendChild(responseText);
                        messageDiv.appendChild(timestamp);
    
                        chatMessages.appendChild(messageDiv);
                    });
                });
                scrollToBottom();
        }
    
        // Refresh initial messages when the page loads
        refreshInitialMessages();
    
        // Periodically refresh messages (e.g., every 5 seconds)
        setInterval(refreshInitialMessages, 1000);
    </script>
    
    
    <!-- Your CSS and JavaScript code can be included here if needed -->
</body>
</html>
